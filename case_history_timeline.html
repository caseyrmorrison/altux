<html data-ng-app="timeline">
<head>
    <title>Case History Timeline</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="style.css" />
    <link rel="stylesheet" type="text/css" href="css/timeline.css" />
    <link rel="stylesheet" type="text/css" href="css/ClientDash.css" />
</head>    
<body data-spy="scroll" data-target="#timeline-nav" data-offset="-800">
<div class="blue-overlay"></div>
<div class="purple-overlay"></div>

<main data-ng-controller="MainController as mainCtrl" ng-cloak> <!-- maybe put ng-cloak herer -->
<header>
    <div class="container-fluid">
        <div class="row">
            <div class="col-sm-2 col-lg-1 case-header-id">
                <span class="data-label">Case ID</span>
                <span class="header-caseID">{{ mainCtrl.caseObj.caseId }}</span>
            </div>
            <div class="col-sm-4 col-lg-3 case-header-details">
                <span class="data-label">Product</span>
                <span class="header-product-desc h-aligned">{{ mainCtrl.caseObj.product }}</span>
                <span class="data-label">Issue Category</span>
                <span class="header-issue-cat">{{ mainCtrl.caseObj.issueCategory }}</span><br />
                <span class="data-label stacked-bottom">Issue</span>
                <span class="header-issue-desc">{{ mainCtrl.caseObj.issue }}</span>
            </div>
            <div class="col-sm-2 col-lg-5"></div>
            <!--fill space with columns here-->
            <div class="col-md-1 col-lg-1">
                <span class="data-label">State</span><br />
                <span class="header-case-state">{{ mainCtrl.caseObj.state }}</span>
            </div>
            <div class="col-sm-2 col-lg-1">
                <span class="data-label">Status</span><br />
                <span class="header-case-status">{{ mainCtrl.caseObj.status }}</span>
            </div>
            <div class="col-sm-1 col-lg-1">
                <button class="button btn-primary">End</button>
            </div>
        </div>
    </div>
</header>

<div class="container-fluid main-content">
    <div class="row">
        <div id="notes-column">
            <span class="tile-title">Notes</span>
            <div class="notes-input" contenteditable>
            <h1> Product Name </h1>
                
            </div>
        </div>
        <timeline-date></timeline-date>
<!--
        <div id="timeline">
            <div id="timeline-nav" class="timeline-content" timeline-date>
-->
<!--                <timeline-date></timeline-date>-->
<!--
                <ul class="nav">
                    <li data-ng-repeat="entry in mainCtrl.caseObj.timeline.entries">
                        <a href="#{{entry.id}}">
                            <span data-ng-show="entry.slaExp" class="timeline-tag alert-tag">sla expired</span>
                            <span data-ng-show="entry.reOpen" class="timeline-tag">reopened</span>
                            <span data-ng-show="entry.closed" class="timeline-tag">closed</span>
                            {{entry.date}} 
                            <svg height="30" width="30">
                                <circle cx="15" cy="15" r="10" stroke-width="3" />
                            </svg>
                        </a>
                    </li>
-->
                    
                    
                    
<!--
                    <li style="margin-top:-15px;"><a href="#sep23">Sep 23, 2017 <svg height="30" width="30">
  <circle cx="15" cy="15" r="10" stroke-width="3" />
</svg></a></li>
                    <li><a href="#sep29"><span class="timeline-tag alert-tag">sla expired</span>Sep 29, 2017 <svg height="30" width="30">
  <circle cx="15" cy="15" r="10" stroke-width="3" />
</svg></a></li>
                    <li style="margin-top:-20px;"><a href="#oct4">Oct 4, 2017 <svg height="30" width="30">
  <circle cx="15" cy="15" r="10" stroke-width="3" />
</svg></a></li>
                    <li><a href="#oct15"><span class="timeline-tag">reopened</span>Oct 15, 2017 <svg height="30" width="30">
  <circle cx="15" cy="15" r="10" stroke-width="3" />
</svg></a></li>
                    <li style="margin-top:-40px;"><a href="#oct17"><span class="timeline-tag">closed</span>Oct 17, 2017 <svg height="30" width="30">
  <circle cx="15" cy="15" r="10" stroke-width="3" />
</svg></a></li>
                    <li><a href="#oct26">Oct 26, 2017 <svg height="30" width="30">
  <circle cx="15" cy="15" r="10" stroke-width="3" />
</svg></a></li>
                    <li><a href="#nov1">Nov 1, 2017 <svg height="30" width="30">
  <circle cx="15" cy="15" r="10" stroke-width="3" />
</svg></a></li>
                    <li><a href="#nov14"><span class="timeline-tag alert-tag">sla expired</span>Nov 14, 2017 <svg height="30" width="30">
  <circle cx="15" cy="15" r="10" stroke-width="3" />
</svg></a></li>
                    <li><a href="#nov24"><span class="timeline-tag">closed</span>Nov 24, 2017 <svg height="30" width="30">
  <circle cx="15" cy="15" r="10" stroke-width="3" />
</svg></a></li>
                    <li style="margin-top:-65px;"><a href="#nov25">Nov 25, 2017 <svg height="30" width="30">
  <circle cx="15" cy="15" r="10" stroke-width="3" />
</svg></a></li>
                    <li><a href="#dec5">Dec 5, 2017 <svg height="30" width="30">
  <circle cx="15" cy="15" r="10" stroke-width="3" />
</svg></a></li>
                    <li><a href="#dec25">Dec 25, 2017 <svg height="30" width="30">
  <circle cx="15" cy="15" r="10" stroke-width="3" />
</svg></a></li>

                </ul>
            </div>
        </div>-->

        <div id="case-history">
            <div class="case-history-content">
                <ul>
                    <li data-ng-repeat="entry in mainCtrl.caseObj.timeline.entries" id="{{entry.id}}" class="history-entry">
                        <div class="row entry-header">
                            <div class="col-xs-2 col-lg-1">
                                <div class="history-icon"><img src="assets/interaction_parented_black-01.png" /></div>
                            </div>
                            <div class="col-xs-10 col-lg-8 history-date-client">{{ entry.date + " | " + entry.name }}</div>
                        </div>
                        <div class="row history-notes-row">
                            <div class="col-xs-2 col-lg-1"></div>
                            <div class="col-xs-2 col-lg-1 history-type data-label">Notes</div>
                            <div class="col-xs-8 col-lg-7 history-type-content"><p>{{ entry.note }}</p></div>
                            <div class="col-xs-8 col-lg-3 entry-history">
                            </div>
                        </div>
                        <div class="row history-action-row">
                            <div class="col-xs-2 col-lg-1"></div>
                            <div class="col-xs-2 col-lg-1 history-type data-label">Actions</div>
                            <div class="col-xs-8 col-lg-10 history-type-content">
                                <ul>
                                    <li data-ng-repeat="action in entry.actions">{{ action }}</li>
                                </ul>
                            </div>
                        </div>
                        <div class="row history-solution-row">
                            <div class="col-xs-2 col-lg-1"></div>
                            <div class="col-xs-2 col-lg-1 history-type data-label">Solutions</div>
                            <div class="col-xs-8 col-lg-10 history-type-content">
                                <ul>
                                    <li>{{ entry.solution }}</li>
                                </ul>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>       
</div>

</main>
<!--Scripts-->
<script type="text/javascript" src="js/lib/jquery-3.2.1.min.js"></script>
<script type="text/javascript" src="js/lib/bootstrap.min.js"></script>
<script type="text/javascript" src="js/lib/angular.min.js"></script>
<!--<script type="text/javascript" src="js/app/history-entry.js"></script>-->
<!--<script type="text/javascript" src="js/app/timeline.js"></script>-->
<!--<script type="text/javascript" src="js/app/case.js"></script>-->
<script type="text/javascript" src="js/app/model.js"></script>
<script type="text/javascript" src="js/app/app.js"></script>
<script type="text/javascript" src="js/lib/jquery.easing.1.3.js"></script>
<script type="text/javascript" src="js/lib/scrollspy.js"></script>
<script type="text/javascript" src="js/lib/jquery.scrollTo.min.js"></script>

<script>
    $(document).ready(function(){

        var windowHeight = $(window).height();
        var headerHeight = $('header').height();
        var notesHeight = $('#notes-column').height();
        var headerHeightDifference = (windowHeight - headerHeight);
        var notesHeightDifference = ((windowHeight - headerHeight) - notesHeight);
        var tileHeight = ($('#services-tile').height() + $('#client-dash-orders').height() + $('#client-dash-payment').height());

        if($(window).width() > 960){

        $('#timeline,#case-history').css({
            "height": headerHeightDifference
        });

        }
        else{
            $('#timeline,#case-history').css({
                "height": notesHeightDifference
            });
        }

        var historyHeight = $('.case-history-content').height();

        $('body').scrollspy({
            offset: 76
        });

        $('#timeline-nav .nav li > a').click(function(){$('body').scrollTo($(this).attr('href'),{duration:500,offset:-76});});

        //$('.history-log-meta-data').click(function(){
            //$(this).siblings('.history-date-client').toggleClass('col-lg-6 col-lg-9');
            //$(this).parent('.entry-header').toggleClass('active');
            //if($(this).parent('.entry-header').hasClass('active')){
            //$(this).parent('.entry-header').siblings('.history-notes-row').children('.entry-history').delay(150).animate({
                //opacity: 1,
                //top: '-=100px'},500,'easeOutExpo')
            //}
            //else{
                 //$(this).parent('.entry-header').siblings('.history-notes-row').children('.entry-history').delay(150).animate({
                //opacity: 0,
                //top: '+=100px'},500,'easeOutExpo')
            //}
        //});

    });

    $(window).resize(function(){
        $('.masonry, .masonry-panel').addClass('panel-resize-duration');
        $('.masonry-panel').addClass('panel-transition');
    });
</script>
</body>

</html>